# Based on mozconfigs from talospace.com
export CC=/usr/bin/gcc
export CXX=/usr/bin/g++
export GN=/usr/bin/gn
export CARGO_HOME=/root/.cargo
export RUSTC_OPT_LEVEL=2

ac_add_options --enable-application=browser
ac_add_options --enable-optimize="-O3 -mcpu=power9 -fpermissive"
ac_add_options --enable-release
ac_add_options --enable-linker=bfd
ac_add_options --enable-lto=full
ac_add_options MOZ_PGO=1
ac_add_options --disable-webrtc

# Stuff that gets appended in run.sh:
# --with-wasi-sysroot:  path will be appended by run.sh.
# CARGO_BUILD_JOBS: Parallal jobs
# mk_add_options MOZ_MAKE_FLAGS: Parallel jobs

export CARGO_BUILD_JOBS=32
mk_add_options MOZ_MAKE_FLAGS="-j64"

# TODO: stuff to clean up
#ac_add_options --without-wasm-sandboxed-libraries
